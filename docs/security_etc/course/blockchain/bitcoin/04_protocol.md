---
comments: true
---

è‹¥è€ƒè™‘ä¸­å¿ƒåŒ–ï¼Œè´§å¸è‹¥æœ‰å¤®è¡ŒBCå‘è¡Œ

- æ•°å­—è´§å¸é¢ä¸´çš„ä¸»è¦é—®é¢˜æ˜¯å¦‚ä½•é¿å… **double spending attack(åŒèŠ±æ”»å‡»)**ï¼Œå³å¯èƒ½å­˜åœ¨è´§å¸è¢«å¤åˆ¶ç»§ç»­ä½¿ç”¨çš„æƒ…å†µ  --> å¯ç»™å…¶ç¼–å·ï¼Œå¹¶BCç»´æŠ¤ä¸€ä¸ªæ•°æ®åº“ï¼Œçœ‹çœ‹å¯¹åº”è´§å¸åœ¨è°æ‰‹ä¸­
  
**è‹¥å»ä¸­å¿ƒåŒ–ï¼Œå˜ä¸ºç”±å¹¿å¤§ç”¨æˆ·æ‰¿æ‹…ï¼Œå¦‚ä½•å®ç°ï¼Ÿ**

- Q: æ•°å­—è´§å¸çš„å‘è¡Œé—®é¢˜ï¼Œæ€ä¹ˆå‘è¡Œï¼Œåº”è¯¥å‘è¡Œå¤šå°‘ï¼Ÿè°å†³å®š
    - æŒ–çŸ¿å†³å®šï¼
- Q: å¦‚ä½•éªŒè¯äº¤æ˜“çš„åˆæ³•æ€§ï¼Œé˜²æ­¢double spending attackï¼Ÿ
    - æ‰€æœ‰ç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå³åŒºå—é“¾

![](./assets/blockchain_è¿‡ç¨‹.jpg)

è‹¥Aè½¬ç»™Bï¼šAéœ€è¦çŸ¥é“Bçš„åœ°å€(é€šè¿‡å…¬é’¥æ¨ç®—å‡ºæ¥ï¼Œå…¬é’¥å–hash)ï¼ŒBè¦çŸ¥é“Açš„å…¬é’¥

- å¦‚ä½•å¾—çŸ¥Açš„å…¬é’¥ï¼Ÿ
    - äº¤æ˜“åˆ†ä¸ºè¾“å…¥å’Œè¾“å‡ºä¸¤éƒ¨åˆ†ï¼š
        - è¾“å…¥ï¼šè¦è¯´æ˜Bçš„æ¥æºä»¥åŠAçš„å…¬é’¥
        - è¾“å‡ºï¼šç»™å‡ºæ”¶æ¬¾äººå…¬é’¥çš„hash
    - éªŒè¯è¿‡ç¨‹æ˜¯é€šè¿‡æ‰§è¡Œ **è„šæœ¬(BTC Script)** æ¥å®ç°çš„ï¼ˆè¾“å…¥å’Œè¾“å‡ºå‡æ˜¯ï¼‰

> **A coinbase transaction(coinbase TX)or generation transaction** is always created by a miner and is the first transaction in a block.

å®é™…ä¸Šä¼šæœ‰å¾ˆå¤šå¾ˆå¤šäº¤æ˜“ï¼Œä¼šç»„ç»‡æˆMerkle Tree

åŒºå—é“¾åˆ†ä¸ºä¸¤éƒ¨åˆ†Block Headerå’ŒBlack body ã€å…·ä½“å†…å®¹[è¯¦è§](../../../../security_etc/blockchain/2-intro.md/#_3)ã€‘

> åŒºå—é“¾æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è´¦æœ¬ï¼Œè´¦æœ¬å†…å®¹è¦è¾¾åˆ° **åˆ†å¸ƒå¼çš„å…±è¯†(distributed consensus)**

## åˆ†å¸ƒå¼å…±è¯†

**å…³äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç ”ç©¶** ï¼š 

åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼šä¸€ä¸ªç³»ç»Ÿå¾ˆå¤šæœåŠ¡å™¨ï¼Œå…±åŒç»´æŠ¤ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œ**å–å¾—å…±è¯†å³è·å–å“ˆå¸Œè¡¨å†…å®¹**

!!! Example "1. FLP impossibility result"

    In a fully asynchronous message-passing distributed system, in which **at least one process may have a crash failure**, it has been proven in the famous 1985 FLP impossibility result by Fischer, Lynch and Paterson that a deterministic algorithm for achieving consensus is impossible

!!! Example "2. CAP Theorem"

    C=Consistency, A=Availability, P=Partition tolerance

    ä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸Šè¿°ä¸‰è€…åªèƒ½æ»¡è¶³ä¸¤ä¸ª

ä¸€ä¸ªè‘—åçš„åè®®â€”â€”**Paxos**ï¼Œå¯ä¿è¯ä¸Šè¿°çš„C ã€æ¶‰åŠåˆ†å¸ƒå¼ç†è®ºçŸ¥è¯†ğŸ˜¨ã€

## BTCä¸­çš„å…±è¯†åè®®

BTCä¸­èŠ‚ç‚¹å¤§éƒ¨åˆ†æ˜¯å¥½çš„ï¼Œå°éƒ¨åˆ†æ˜¯æ¶æ„ï¼Œå¦‚ä½•è®¾è®¡å…±è¯†åè®®ï¼Ÿ

- æ ¹æ®è´¦æˆ·æ•°è¿›è¡ŒæŠ•ç¥¨ï¼Œè¶…è¿‡ä¸€åŠåˆ™okã€‚**æ›´å¤§çš„é—®é¢˜ï¼šè°å¯ä»¥æŠ•ç¥¨å³membershipé—®é¢˜**
- e.g è”ç›Ÿé“¾ï¼Œåªæœ‰ç¬¦åˆæŸäº›æ¡ä»¶çš„å¤§å…¬å¸æ‰å¯ä»¥åŠ å…¥ ï¼ˆ[hyperledger](https://www.hyperledger.org/)ï¼‰

sybil attack(å¥³å·«æ”»å‡»)ï¼šæŸä¸ªè¶…çº§è®¡ç®—æœºäº§ç”Ÿçš„è´¦æˆ·ä¸ªæ•°è¶…è¿‡äº†æ€»æ•°çš„ä¸€åŠ

- **æ•…æ¯”ç‰¹å¸çš„æŠ•ç¥¨æœºåˆ¶å¹¶ä¸æ˜¯åˆ©ç”¨è´¦æˆ·çš„æ•°ç›®æ¥æŠ•ç¥¨ï¼Œè€Œæ˜¯æŒ‰ç…§è®¡ç®—åŠ›æ¥æŠ•ç¥¨**

![](./assets/longest_valid_chain.jpg)

æ¥å—çš„åŒºå—åº”è¯¥æ˜¯åœ¨ **æœ€é•¿åˆæ³•é“¾** ä¸Šï¼Œä¸Šå›¾ä¸­ä¸ä¼šæ¥å—ï¼Œç§°ä¸º **åˆ†å‰æ”»å‡»(forking attack)**

> Forking attacks involve intentionally causing a split in the blockchain network to gain control or manipulate the consensus mechanism

è‹¥ä¸¤ä¸ªæœºå™¨åŒæ—¶æŒ–åˆ°çŸ¿äº†ï¼Œåˆ™å¯èƒ½åŒæ—¶äº§ç”Ÿä¸¤ä¸ªåŒºå—éƒ½è¿æ¥åœ¨åˆæ³•é“¾çš„æœ€åï¼ˆå±äºæ­£å¸¸åˆ†å‰ï¼‰

- å…¶ä»–åŒºå—æœ€å…ˆæ”¶åˆ°å“ªä¸ªåŒºå—çš„å¹¿æ’­ï¼Œå°±ä¼šé“¾æ¥åˆ°è¿™ä¸ªåŒºå—åé¢
    - å¦å¤–çš„é‚£ä¸ªè¢«ä¸¢å¼ƒ(ç§°orphan block)

**å›åˆ°ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šè°æ¥å‘è¡Œè´§å¸ï¼Ÿ**

- **coinbase transactionæ˜¯å‘è¡Œæ–°BTCçš„å”¯ä¸€æ–¹æ³•**ï¼Œå…¶ä½™ä»…ä»…æ˜¯è½¬è´¦
- åˆå§‹block rewardä¸º50BTCï¼Œ21ä¸‡åŒºå—ä»¥åï¼ŒåŒºå—å¥–åŠ±å‡åŠ25BTC....ä»¥æ­¤ç±»æ¨
    - å¦‚ä»Šæ˜¯12.5BTCï¼Œä»·é’±ä¸º6k$å·¦å³ï¼Œçº¦å…«ä¸‡ç¾å…ƒ
    - æ•…å‘å¸ƒåŒºå—å¯å¾—åˆ°å…«ä¸‡ç¾å…ƒå¥–åŠ±ï¼Œæ•…äº‰å…ˆæåæŠ¢è®°å¸æƒ

**BTCè¾¾åˆ°å…±è¯†å³è·å–è´¦æœ¬çš„å†…å®¹**ï¼Œåªæœ‰è·å¾—è®°å¸æƒçš„èŠ‚ç‚¹æ‰èƒ½å‘é‡Œé¢å†™ä¸œè¥¿

- äº‰å¤ºè®°å¸æƒçš„è¿‡ç¨‹å³æŒ–çŸ¿mining (ç®—åŠ›å†³å®š)
- äº‰å¤ºè®°å¸æƒçš„èŠ‚ç‚¹ç§°ä¸ºæ—·å·¥miner

Q: æ­¤æ–¹æ³•å¦‚ä½•å°±é¿å…äº†å¥³å·«æ”»å‡»ï¼Ÿ

- å› ä¸ºå³ä¾¿ä½ åˆ›å»ºæ›´å¤šè´¦æˆ·ï¼Œhash rateå¹¶æ²¡æœ‰å¢åŠ ï¼Œæ¯ç§’å°è¯•çš„nonceå¹¶ä¸ä¼šå¢åŠ 

> Hash rate is a measure of the computational power of a blockchain network, group, or individual.
> Hash rate is determined by how many guesses are made per second.