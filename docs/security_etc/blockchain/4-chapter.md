---
comments: true
---

## 简介

去中心化的共识机制也是要解决[拜占庭将军问题](https://zh.wikipedia.org/wiki/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B%E9%97%AE%E9%A2%98)——分布式对等网络通信容错问题

**区块链是比特币的底层技术**，而 ^^共识机制是去中心化的分布式账本中的规则核心^^ ，决定了区块链的security_etc性、可扩展性和去中心化程度等许多重要特性，有助于验证和验证信息被添加到分类账簿，确保只有真实的事务记录在区块链上

> 共识机制是指以去中心化的方式就网络的状态达成统一协议的过程

**常见的共识机制：**

- PoW（工作量证明）
- PoS（权益证明）
- DPoS（委任权益证明）
- PBFT（实用拜占庭容错算法）
- POOL（验证池）等


## 分布式一致性算法

拜占庭的将军们没有一个中心化的领导机构，如果他们需要攻击某个城市，所有将军需要对任何将军可能提出的攻击时间达成共识，但可能会有多个将军同时发出不同的攻击计划，并且将军中可能还有叛徒。那怎样达成共识呢？

[Leslie Lamport](https://en.wikipedia.org/wiki/Leslie_Lamport)证明当叛变者不超过$1/3$时，存在有效的算法。不论叛变者如何折腾，将军们总能达成一致的结果。如果叛变者过多，则无法保证一定能达到一致性。之所以难解，在于任何时候系统中都可能存在多个提案，并且要完成最终的一致性确认过程十分困难，容易受干扰

**比特币的区块链网络在设计时使用的 PoW（Proof of Work）算法思路**

- 一个是限制一段时间内整个网络中出现提案的个数（增加提案成本）
- 另一个是放宽对最终一致性确认的需求，约定好大家都确认并沿着已知最长的链进行拓宽

若比特币系统在某一个时刻同时出现了两个都合法的区块，那么两个都承认。于是区块链上会出现两个合法的分支（**称为分叉**）。此时矿工可以选择任何一个分支继续，在某个分支的长度超过了另一个分支时，短的那个分支则马上作废